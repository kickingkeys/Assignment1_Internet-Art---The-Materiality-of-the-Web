/* Base styling */
@import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap');

:root {
  /* Color palette */
  --bg-color: #0d0d0d;
  --text-color: #ffffff;
  --accent-color: #00ffcc;
  
  /* Glitch colors for later use */
  --glitch-color-1: #ff00cc;
  --glitch-color-2: #0066ff;
  --glitch-color-3: #ffcc00;
  
  /* Animation timing variables */
  --total-duration: 20s;
  
  /* Timeline segments */
  --pristine-end: 3s;  /* 0-3s: Pristine state */
  --ascii-corrupt-start: 3s;  /* 3-7s: ASCII corruption begins */
  --ascii-corrupt-end: 7s;
  --nav-corrupt-start: 7s;  /* 7-10s: Navigation corruption */
  --nav-corrupt-end: 10s;
  --major-glitch-start: 10s;  /* 10-15s: Major glitching */
  --major-glitch-end: 15s;
  --fade-start: 15s;  /* 15-18s: Fading begins */
  --fade-end: 18s;
  --blackout-start: 18s;  /* 18-20s: Complete blackout */
  --blackout-end: 20s;
  
  /* Animation progress percentages for keyframes */
  --pristine-end-pct: 15%;        /* 3s / 20s = 15% */
  --ascii-corrupt-start-pct: 15%; /* 3s / 20s = 15% */
  --ascii-corrupt-end-pct: 35%;   /* 7s / 20s = 35% */
  --nav-corrupt-start-pct: 35%;   /* 7s / 20s = 35% */
  --nav-corrupt-end-pct: 50%;     /* 10s / 20s = 50% */
  --major-glitch-start-pct: 50%;  /* 10s / 20s = 50% */
  --major-glitch-end-pct: 75%;    /* 15s / 20s = 75% */
  --fade-start-pct: 75%;          /* 15s / 20s = 75% */
  --fade-end-pct: 90%;            /* 18s / 20s = 90% */
  --blackout-start-pct: 90%;      /* 18s / 20s = 90% */
  --blackout-end-pct: 100%;       /* 20s / 20s = 100% */
  
  /* New glitch effect variables */
  --glitch-clip: polygon(0 0, 100% 0, 100% 5%, 0 5%);
  --noise-1: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAGFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANxM8mAAAACHRSTlMzABEiM0Qid4IvVUoAAAA1SURBVDjLY2AYBaNgFIyCUTAKRsEoGAWjYBSMglEwCkbBKBgFo2AUjIJRMApGwSgYBaNgGAEA5/kAowABHFQAAAAASUVORK5CYII=");
  
  /* New endless glitch variables */
  --glitch-block-1: polygon(0 0, 100% 0, 100% 5%, 0 5%);
  --glitch-block-2: polygon(0 20%, 100% 20%, 100% 25%, 0 25%);
  --glitch-block-3: polygon(0 40%, 100% 40%, 100% 45%, 0 45%);
  --glitch-block-4: polygon(0 60%, 100% 60%, 100% 65%, 0 65%);
  --glitch-block-5: polygon(0 80%, 100% 80%, 100% 85%, 0 85%);
  
  /* Add new glitch pattern variables */
  --glitch-pattern: repeating-linear-gradient(90deg,
    #000 0%,
    #fff 0.2%,
    #000 0.4%,
    transparent 0.6%,
    #fff 0.8%,
    #000 1%
  );
  --glitch-pattern-2: repeating-linear-gradient(180deg,
    transparent 0%,
    rgba(255, 255, 255, 0.1) 0.5%,
    transparent 1%,
    rgba(0, 0, 0, 0.2) 1.5%
  );
  
  /* Add new glitch effects */
  --glitch-shift: 2px;
  --pixel-size: 1px;
  --chaos-intensity: 3;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  animation: pixelate 0.3s infinite step-end;
}

body {
  background-color: var(--bg-color);
  color: var(--text-color);
  font-family: 'Space Mono', monospace;
  height: 100vh;
  width: 100vw;
  overflow: hidden;
  position: relative;
  display: flex;
  flex-direction: column;
  animation: masterFade var(--total-duration) forwards;
}

/* Main content */
main {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 2rem;
  position: relative;
}

/* Grid background */
main::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    linear-gradient(to right, rgba(255,255,255,0.03) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255,255,255,0.03) 1px, transparent 1px);
  background-size: 40px 40px;
  z-index: -1;
  animation: gridFade var(--total-duration) forwards;
}

/* ASCII art container - position relative for absolute positioning of corruption layers */
.ascii-art-container {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-family: monospace;
  white-space: pre;
  font-size: 24px;
  line-height: 1.2;
  text-align: center;
}

.ascii-central, .ascii-corrupt-1, .ascii-corrupt-2, .ascii-corrupt-3 {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  white-space: pre;
  color: var(--text-color);
}

.ascii-central {
  opacity: 1;
  animation: seedPulse 1s infinite;
}

.ascii-corrupt-1 {
  opacity: 0;
  animation: spread1 var(--total-duration) forwards;
}

.ascii-corrupt-2 {
  opacity: 0;
  animation: spread2 var(--total-duration) forwards;
}

.ascii-corrupt-3 {
  opacity: 0;
  animation: spread3 var(--total-duration) forwards;
}

/* Create spreading animations */
@keyframes seedPulse {
  0%, 100% {
    opacity: 1;
    color: var(--text-color);
  }
  50% {
    opacity: 0.7;
    color: var(--glitch-color-1);
  }
}

@keyframes spread1 {
  0%, 20% {
    opacity: 0;
  }
  25% {
    opacity: 1;
  }
  45% {
    opacity: 0;
  }
  100% {
    opacity: 0;
  }
}

@keyframes spread2 {
  0%, 40% {
    opacity: 0;
  }
  45% {
    opacity: 1;
  }
  65% {
    opacity: 0;
  }
  100% {
    opacity: 0;
  }
}

@keyframes spread3 {
  0%, 60% {
    opacity: 0;
  }
  65% {
    opacity: 1;
  }
  85% {
    opacity: 0;
  }
  100% {
    opacity: 0;
  }
}

/* Add random character overlay that fills the screen at the end */
.glitch-overlay::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: repeating-linear-gradient(
    0deg,
    transparent 0%,
    rgba(0, 0, 0, 0.1) 50%,
    transparent 100%
  );
  opacity: 0;
  animation: fillScreen var(--total-duration) forwards;
}

@keyframes fillScreen {
  0%, 80% {
    opacity: 0;
    background-size: 100% 100%;
  }
  85% {
    opacity: 1;
    background-size: 200% 200%;
    background-image: repeating-linear-gradient(
      0deg,
      var(--text-color) 0%,
      transparent 1%,
      var(--text-color) 2%
    );
  }
  90% {
    opacity: 1;
    background-size: 300% 300%;
    background-image: repeating-linear-gradient(
      45deg,
      var(--text-color) 0%,
      transparent 2%,
      var(--text-color) 4%
    );
  }
  95% {
    opacity: 1;
    background-size: 400% 400%;
    background-image: repeating-linear-gradient(
      90deg,
      var(--text-color) 0%,
      transparent 3%,
      var(--text-color) 6%
    );
  }
  100% {
    opacity: 1;
    background: black;
  }
}

/* === KEYFRAME ANIMATIONS === */

/* Master fade animation - controls overall page fading */
@keyframes masterFade {
  0% {
    background-color: var(--bg-color);
    filter: brightness(1) contrast(1);
  }
  90% {
    background-color: var(--bg-color);
    filter: brightness(1) contrast(1.2);
  }
  100% {
    background-color: var(--bg-color);
    filter: brightness(1.2) contrast(1.5);
  }
}

/* ASCII main content fade animation */
@keyframes asciiMainFade {
  0% {
    opacity: 1;
    transform: translateZ(0);
    filter: none;
  }
  15% {
    opacity: 0.9;
    transform: translateZ(0);
    filter: none;
  }
  35% {
    opacity: 0.3;
    transform: translateZ(-10px);
    filter: blur(0.5px);
  }
  50% {
    opacity: 0;
    transform: translateZ(-20px);
    filter: blur(1px);
  }
  100% {
    opacity: 0;
    transform: translateZ(-30px);
    filter: blur(2px);
  }
}

/* First corruption layer animation */
@keyframes corruptionSpread1 {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1);
  }
  30% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1);
  }
  40% {
    opacity: 0.7;
    transform: translate(-50%, -50%) scale(2);
  }
  70% {
    opacity: 0.5;
    transform: translate(-50%, -50%) scale(3);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(4);
  }
}

/* Second (more extreme) corruption layer animation */
@keyframes corruptionSpread2 {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1);
  }
  50% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1);
  }
  60% {
    opacity: 0.8;
    transform: translate(-50%, -50%) scale(3);
  }
  90% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(6);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(8);
  }
}

/* Grid background fade */
@keyframes gridFade {
  0% {
    opacity: 1;
    background-size: 40px 40px;
    filter: none;
  }
  75% {
    opacity: 0.6;
    background-size: 45px 37px;
    filter: hue-rotate(10deg);
  }
  90% {
    opacity: 0.1;
    background-size: 48px 33px;
    filter: hue-rotate(20deg);
  }
  100% {
    opacity: 0;
    background-size: 50px 50px;
    filter: hue-rotate(30deg);
  }
}

/* Overlay glitch animation */
@keyframes overlayGlitch {
  0% {
    opacity: 0;
    background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));
    mix-blend-mode: overlay;
  }
  /* Begin to appear during ASCII corruption */
  15% {
    opacity: 0.1;
    background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));
    mix-blend-mode: overlay;
  }
  35% {
    opacity: 0.2;
    background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.2));
    mix-blend-mode: overlay;
  }
  /* More visible during nav corruption */
  50% {
    opacity: 0.3;
    background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.3));
    mix-blend-mode: overlay;
  }
  /* Very noticeable during major glitching */
  50% {
    opacity: 0.4;
    background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.4));
    mix-blend-mode: color-dodge;
  }
  75% {
    opacity: 0.6;
    background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.5));
    mix-blend-mode: overlay;
  }
  /* Heavy during fade */
  75% {
    opacity: 0.8;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.6));
    mix-blend-mode: multiply;
  }
  90% {
    opacity: 0.9;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.8));
    mix-blend-mode: multiply;
  }
  /* Full blackout */
  90% {
    opacity: 1;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.95));
    mix-blend-mode: multiply;
  }
  100% {
    opacity: 1;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 1), rgba(0, 0, 0, 1));
    mix-blend-mode: multiply;
  }
}

/* New keyframe animations */
@keyframes glitchClip {
  0%, 100% { clip-path: var(--glitch-block-1); }
  20% { clip-path: var(--glitch-block-2); }
  40% { clip-path: var(--glitch-block-3); }
  60% { clip-path: var(--glitch-block-4); }
  80% { clip-path: var(--glitch-block-5); }
}

@keyframes noiseEffect {
  0% { opacity: 0; }
  35% { opacity: 0.1; }
  50% { opacity: 0.2; }
  75% { opacity: 0.4; }
  90% { opacity: 0.6; }
  100% { opacity: 0.8; }
}

/* Add new endless glitch animations */
@keyframes endlessGlitch {
  0%, 100% {
    transform: translateX(0) scale(1);
    background-position: 0% 0%;
    filter: brightness(1) contrast(150%);
  }
  25% {
    transform: translateX(-5px) scale(1.02);
    background-position: 100% 0%;
    filter: brightness(1.5) contrast(200%);
  }
  50% {
    transform: translateX(5px) scale(0.98);
    background-position: 0% 100%;
    filter: brightness(0.8) contrast(300%);
  }
  75% {
    transform: translateX(-2px) scale(1.01);
    background-position: 100% 100%;
    filter: brightness(1.2) contrast(250%);
  }
}

@keyframes endlessGlitch2 {
  0%, 100% {
    transform: rotate(45deg) translateX(0);
    background-position: 0% 0%;
    filter: invert(1) brightness(1);
  }
  33% {
    transform: rotate(46deg) translateX(-10px);
    background-position: 100% 0%;
    filter: invert(0) brightness(1.5);
  }
  66% {
    transform: rotate(44deg) translateX(10px);
    background-position: 0% 100%;
    filter: invert(1) brightness(0.8);
  }
}

/* Update morphing animation */
@keyframes morphEffect {
  0% {
    transform: perspective(1000px) rotateX(0deg) rotateY(0deg) scale(1);
    filter: brightness(1) contrast(1);
  }
  20% {
    transform: perspective(1000px) rotateX(5deg) rotateY(-3deg) scale(1.05);
    filter: brightness(1.3) contrast(1.2) saturate(150%);
  }
  40% {
    transform: perspective(1000px) rotateX(-3deg) rotateY(5deg) scale(0.95);
    filter: brightness(0.8) contrast(1.4) saturate(200%);
  }
  60% {
    transform: perspective(1000px) rotateX(2deg) rotateY(-5deg) scale(1.02);
    filter: brightness(1.2) contrast(0.9) saturate(300%);
  }
  80% {
    transform: perspective(1000px) rotateX(-5deg) rotateY(2deg) scale(0.98);
    filter: brightness(0.9) contrast(1.3) saturate(250%);
  }
}

/* Update final glitch animation */
@keyframes finalGlitch {
  0% { opacity: 0; }
  90% { opacity: 0; }
  95% { opacity: 0.5; }
  100% { opacity: 1; }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .ascii-central, .ascii-corrupt-1, .ascii-corrupt-2 {
    font-size: 9px;
  }
}

@media (max-width: 480px) {
  .ascii-central, .ascii-corrupt-1, .ascii-corrupt-2 {
    font-size: 7px;
  }
}

/* Update the final state to match reference image */
body::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    var(--glitch-pattern),
    var(--glitch-pattern-2);
  background-size: 200% 200%;
  opacity: 0;
  pointer-events: none;
  mix-blend-mode: difference;
  animation: 
    finalGlitch var(--total-duration) forwards,
    endlessGlitch 0.2s infinite steps(2) var(--total-duration);
  filter: contrast(150%) brightness(120%) url('#glitchFilter');
}

/* Add a second glitch layer */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--glitch-pattern);
  background-size: 150% 150%;
  opacity: 0;
  transform: rotate(45deg);
  mix-blend-mode: exclusion;
  animation: 
    finalGlitch var(--total-duration) forwards,
    endlessGlitch2 0.3s infinite steps(3) var(--total-duration);
  filter: invert(1);
}

/* Add new chaotic animations to all elements */
.ascii-central, .ascii-corrupt-1, .ascii-corrupt-2, .title, .ascii-nav {
  animation: 
    pixelShift 0.2s infinite step-end,
    colorShift 0.3s infinite step-end,
    glitchMove 0.15s infinite step-end;
}

/* Pixelation animation */
@keyframes pixelate {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(calc(1 / var(--pixel-size))) scale(var(--pixel-size));
  }
}

/* New keyframe animations for chaos */
@keyframes pixelShift {
  0%, 100% {
    clip-path: inset(0 0 0 0);
  }
  10% {
    clip-path: inset(10% -10px 80% 0);
    transform: translateX(var(--glitch-shift));
  }
  20% {
    clip-path: inset(80% 0 5% 0);
    transform: translateX(calc(var(--glitch-shift) * -1));
  }
  30% {
    clip-path: inset(30% 10px 60% 0);
    transform: translateY(var(--glitch-shift));
  }
  40% {
    clip-path: inset(50% 0 30% 0);
    transform: translateY(calc(var(--glitch-shift) * -1));
  }
  50% {
    clip-path: inset(70% 0 10% 0);
    transform: translate(var(--glitch-shift), var(--glitch-shift));
  }
  60% {
    clip-path: inset(20% 0 70% 0);
    transform: translate(calc(var(--glitch-shift) * -1), calc(var(--glitch-shift) * -1));
  }
}

@keyframes colorShift {
  0%, 100% {
    filter: hue-rotate(0deg) saturate(100%);
  }
  20% {
    filter: hue-rotate(90deg) saturate(200%);
  }
  40% {
    filter: hue-rotate(180deg) saturate(300%);
  }
  60% {
    filter: hue-rotate(270deg) saturate(150%);
  }
  80% {
    filter: hue-rotate(360deg) saturate(250%);
  }
}

@keyframes glitchMove {
  0%, 100% {
    transform: translate(0);
  }
  20% {
    transform: translate(-2px, 2px);
  }
  40% {
    transform: translate(2px, -2px);
  }
  60% {
    transform: translate(-1px, -1px);
  }
  80% {
    transform: translate(1px, 1px);
  }
}

/* Add SVG filter for more glitch effects */
body::after {
  filter: contrast(150%) brightness(120%) url('#glitchFilter');
}

/* Add this to your HTML head */
<style>
  @keyframes pixelate {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(calc(1 / var(--pixel-size))) scale(var(--pixel-size));
    }
  }
  
  /* Make everything more glitchy */
  * {
    animation: pixelate 0.3s infinite step-end;
  }
  
  /* Add random glitch blocks */
  body::before, body::after {
    animation: 
      finalGlitch var(--total-duration) forwards,
      endlessGlitch 0.1s infinite steps(4) var(--total-duration),
      pixelShift 0.2s infinite step-end;
  }
</style>

/* Add this to your HTML */
<svg style="display: none;">
  <defs>
    <filter id="glitchFilter">
      <feTurbulence type="fractalNoise" baseFrequency="0.15" numOctaves="1" result="noise"/>
      <feDisplacementMap in="SourceGraphic" in2="noise" scale="5"/>
    </filter>
  </defs>
</svg>

/* Add new keyframe animations */
@keyframes expandContainer {
  0% {
    transform: scale(1);
  }
  100% {
    transform: scale(5);
    filter: blur(1px) contrast(150%);
  }
}

@keyframes eyePulse {
  0%, 100% {
    transform: scale(1);
    filter: brightness(1);
  }
  50% {
    transform: scale(1.02);
    filter: brightness(1.2);
  }
}

@keyframes glitchPulse {
  0%, 100% {
    transform: translate(0) scale(1);
    filter: none;
  }
  20% {
    transform: translate(2px, -2px) scale(1.01);
    filter: invert(1);
  }
  40% {
    transform: translate(-2px, 2px) scale(0.99);
    filter: hue-rotate(90deg);
  }
  60% {
    transform: translate(1px, 1px) scale(1.02);
    filter: contrast(150%);
  }
  80% {
    transform: translate(-1px, -1px) scale(0.98);
    filter: brightness(150%);
  }
}

@keyframes glitchText {
  0% {
    opacity: 0;
    transform: scale(1);
  }
  90% {
    opacity: 0;
    transform: scale(1);
  }
  95% {
    opacity: 0.5;
    transform: scale(1.2);
  }
  100% {
    opacity: 1;
    transform: scale(1.5);
  }
}

@keyframes randomChars {
  0% { content: '░▒▓█▀▄▐▌╬╠═╦╔╗╚╝╨╥╫┃┆┇┈┉┊┋☰☱☲☳☴☵☶☷'; }
  20% { content: '▓█▀▄▐▌╬╠═╦╔╗╚╝╨╥╫┃┆┇┈┉┊┋☰☱☲☳☴☵☶☷░▒'; }
  40% { content: '▀▄▐▌╬╠═╦╔╗╚╝╨╥╫┃┆┇┈┉┊┋☰☱☲☳☴☵☶☷░▒▓█'; }
  60% { content: '▐▌╬╠═╦╔╗╚╝╨╥╫┃┆┇┈┉┊┋☰☱☲☳☴☵☶☷░▒▓█▀▄'; }
  80% { content: '╬╠═╦╔╗╚╝╨╥╫┃┆┇┈┉┊┋☰☱☲☳☴☵☶☷░▒▓█▀▄▐▌'; }
}

@keyframes pulseEffect {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.1);
  }
}

@keyframes spreadCorruption {
  0% {
    transform: translate(-50%, -50%) scale(1);
    letter-spacing: normal;
  }
  40% {
    transform: translate(-50%, -50%) scale(2);
    letter-spacing: 0.5em;
  }
  80% {
    transform: translate(-50%, -50%) scale(5);
    letter-spacing: 1em;
  }
  100% {
    transform: translate(-50%, -50%) scale(8);
    letter-spacing: 2em;
    filter: blur(2px);
  }
}

@keyframes finalBlackout {
  0%, 90% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
} 